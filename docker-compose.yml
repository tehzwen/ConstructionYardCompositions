version: '3.4'
services: 
    reactfrontend:
        build: ./reactfrontend
        ports:
            - "5000:3000"
        volumes: 
            - type: bind
              source: ./reactfrontend/src
              target: /usr/app/src
            - type: bind
              source: ./reactfrontend/public
              target: /usr/app/public
        stdin_open: true
        depends_on: 
            - gobackend
    gobackend:
        build: ./server
        environment: 
            MYSQL_DB: host.docker.internal
            MYSQL_USER: dev
            MYSQL_DATABASE: goapp
            MYSQL_PASSWORD: helloworld
            MYSQL_PORT: 3308
        ports:
            - "4500:8080"
        volumes: 
            - type: bind
              source: ./server
              target: /usr/app
        privileged: true
        depends_on: 
            - mysqlserver
    mysqlserver:
        build: ./mysqlserver
        environment: 
            MYSQL_ROOT_PASSWORD: helloworld
            MYSQL_DATABASE: goapp
        ports:
            - "3308:3306"